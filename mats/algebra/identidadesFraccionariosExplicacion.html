<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta https-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script
        src="https://pe-pe-pe.herokuapp.com/public/atlasConocimiento/nodosConocimiento/recursos/librerias/vue.global.js"></script>

    <script
        src="https://pe-pe-pe.herokuapp.com/public/atlasConocimiento/nodosConocimiento/recursos/components/bloque.js"></script>
    <script
        src="https://pe-pe-pe.herokuapp.com/public/atlasConocimiento/nodosConocimiento/recursos/components/enlace.js"></script>
    <script
        src="https://pe-pe-pe.herokuapp.com/public/atlasConocimiento/nodosConocimiento/recursos/components/recuadro.js"></script>

    <link rel="stylesheet" href="http://127.0.0.1:8080/recursos/estilos/estilosGenerales.css">
    <link rel="stylesheet" href="http://127.0.0.1:8080/recursos/components/recuadroEstilo.css">
    <link rel="stylesheet"
        href="https://pe-pe-pe.herokuapp.com/public/atlasConocimiento/nodosConocimiento/recursos/components/bloqueEstilo.css">
    <link rel="stylesheet"
        href="https://pe-pe-pe.herokuapp.com/public/atlasConocimiento/nodosConocimiento//recursos/components/enlaceEstilo.css">
    <link rel="stylesheet" href="http://127.0.0.1:8080/recursos/components/controlStepsEstilo.css">



    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="http://127.0.0.1:8080/recursos/librerias/MathJax/es5/tex-chtml.js"></script>



    <title>Identidades de fraccionarios - explicación</title>
</head>

<body>
    <div id="doc">
        <p>
            Las expresiones numéricas que son operaciones entre fraccionarios tienen identidades útiles.
        </p>

        <recuadro-component tipo='datoPrevio'>
            <div class="flexVertical">
                <span>Una suma de fraccionarios como esta:</span>

                <div class="contenedorMath" id="i1ContenedorMath" ref="i1ContenedorMath">
                    <div class="signal diagonal i1Diagonal" id="i1Diagonal1" :style="[ i1EstiloLinea1 ]"
                        v-show="i1MostrandoDiagonal1">
                        <div class="bolita inicial"> </div>
                        <div class="linea"> </div>
                        <div class="bolita final"> </div>
                    </div>
                    <div class="signal diagonal i1Diagonal" id="i1Diagonal2" :style="[ i1EstiloLinea2 ]"
                        v-show="i1MostrandoDiagonal2">
                        <div class="bolita inicial"> </div>
                        <div class="linea"> </div>
                        <div class="bolita final"> </div>
                    </div>
                    <div class="signal diagonal i1Diagonal" id="i1Diagonal3" :style="[ i1EstiloLinea3 ]"
                        v-show="i1MostrandoDiagonal3">
                        <div class="bolita inicial"> </div>
                        <div class="linea"> </div>
                        <div class="bolita final"> </div>
                    </div>
                    <div class="signal bolaOperadorCentral" :style="[ i1EstiloBolaOperadorCentral ]"
                        v-show="i1MostrandoBolaOperadorCentral">
                    </div>
                    <math class="expresion expresionPrimera" id="i1ExpresionPrimera" style="font-size: 200%;">
                        <mfrac>
                            <mn ref="i1LugarA">a</mn>
                            <mn ref="i1LugarB">b</mn>
                        </mfrac>
                        <mo style="font-size: 50%" ref="i1OperadorCentral">
                            +
                        </mo>
                        <mfrac>
                            <mn ref="i1LugarC">c</mn>
                            <mn ref="i1LugarD">d</mn>
                        </mfrac>
                    </math>
                </div>
                <span>Es idéntica a:</span>

                <math style="font-size: 200%">
                    <mfrac>
                        <mrow>
                            <mpadded class="hoverable" width="35px" height="130%" depth="5px" lspace="3px">
                                <mrow @pointerenter="i1MostrandoDiagonal1=true"
                                    @pointerleave="i1MostrandoDiagonal1=false">
                                    <mn>
                                        a
                                    </mn>
                                    <mn>
                                        d
                                    </mn>
                                </mrow>
                            </mpadded>
                            <mpadded class="hoverable" width="22px" height="90%" depth="5px"
                                @pointerenter="i1MostrandoBolaOperadorCentral=true"
                                @pointerleave="i1MostrandoBolaOperadorCentral=false">
                                <mo>
                                    +
                                </mo>
                            </mpadded>
                            <mpadded class="hoverable" width="30px" height="130%" depth="5px" lspace="3px">
                                <mrow @pointerenter="i1MostrandoDiagonal2=true"
                                    @pointerleave="i1MostrandoDiagonal2=false">
                                    <mn>
                                        b
                                    </mn>
                                    <mn>
                                        c
                                    </mn>
                                </mrow>
                            </mpadded>
                        </mrow>

                        <mpadded class="hoverable" width="30px" height="130%" depth="5px" lspace="3px">
                            <mrow @pointerenter="i1MostrandoDiagonal3=true" @pointerleave="i1MostrandoDiagonal3=false">
                                <mn>b</mn>
                                <mn>d</mn>
                            </mrow>
                        </mpadded>
                    </mfrac>
                </math>
            </div>
        </recuadro-component>

        <recuadro-component tipo='datoPrevio'>
            <div class="flexVertical">
                <span>Una resta de fraccionarios como esta:</span>

                <div class="contenedorMath" id="i2ContenedorMath" ref="i2ContenedorMath">
                    <div class="signal diagonal i2Diagonal" id="i2Diagonal1" :style="[ i2EstiloLinea1 ]"
                        v-show="i2MostrandoDiagonal1">
                        <div class="bolita inicial"> </div>
                        <div class="linea"> </div>
                        <div class="bolita final"> </div>
                    </div>
                    <div class="signal diagonal i2Diagonal" id="i2Diagonal2" :style="[ i2EstiloLinea2 ]"
                        v-show="i2MostrandoDiagonal2">
                        <div class="bolita inicial"> </div>
                        <div class="linea"> </div>
                        <div class="bolita final"> </div>
                    </div>
                    <div class="signal diagonal i2Diagonal" id="i2Diagonal3" :style="[ i2EstiloLinea3 ]"
                        v-show="i2MostrandoDiagonal3">
                        <div class="bolita inicial"> </div>
                        <div class="linea"> </div>
                        <div class="bolita final"> </div>
                    </div>
                    <div class="signal bolaOperadorCentral" :style="[ i2EstiloBolaOperadorCentral ]"
                        v-show="i2MostrandoBolaOperadorCentral">
                    </div>
                    <math class="expresion expresionPrimera" id="i2ExpresionPrimera" style="font-size: 200%;">
                        <mfrac>
                            <mn ref="i2LugarA">a</mn>
                            <mn ref="i2LugarB">b</mn>
                        </mfrac>
                        <mo style="font-size: 50%" ref="i2OperadorCentral">
                            -
                        </mo>
                        <mfrac>
                            <mn ref="i2LugarC">c</mn>
                            <mn ref="i2LugarD">d</mn>
                        </mfrac>
                    </math>
                </div>
                <span>Es idéntica a:</span>

                <math style="font-size: 200%">
                    <mfrac>
                        <mrow>
                            <mpadded class="hoverable" width="35px" height="130%" depth="5px" lspace="3px">
                                <mrow @pointerenter="i2MostrandoDiagonal1=true"
                                    @pointerleave="i2MostrandoDiagonal1=false">
                                    <mn>
                                        a
                                    </mn>
                                    <mn>
                                        d
                                    </mn>
                                </mrow>
                            </mpadded>
                            <mpadded class="hoverable" width="22px" height="130%" depth="5px">
                                <mo @pointerenter="i2MostrandoBolaOperadorCentral=true"
                                    @pointerleave="i2MostrandoBolaOperadorCentral=false">
                                    -
                                </mo>
                            </mpadded>

                            <mpadded class="hoverable" width="30px" height="130%" depth="5px" lspace="3px">
                                <mrow @pointerenter="i2MostrandoDiagonal2=true"
                                    @pointerleave="i2MostrandoDiagonal2=false">
                                    <mn>
                                        b
                                    </mn>
                                    <mn>
                                        c
                                    </mn>
                                </mrow>
                            </mpadded>
                        </mrow>

                        <mpadded class="hoverable" width="30px" height="130%" depth="5px" lspace="3px">
                            <mrow @pointerenter="i2MostrandoDiagonal3=true" @pointerleave="i2MostrandoDiagonal3=false">
                                <mn>b</mn>
                                <mn>d</mn>
                            </mrow>
                        </mpadded>
                    </mfrac>
                </math>
            </div>
        </recuadro-component>

    </div>
</body>

</html>

<script type="module">
    const {createApp, ref, computed, watch, nextTick, onMounted} = Vue;
    import {componenteControlSteps} from "http://127.0.0.1:8080/recursos/components/controlSteps.js"

    const app = createApp({
        setup() {
            //i1
            const i1MostrandoDiagonal1 = ref(false);
            const i1MostrandoDiagonal2 = ref(false);
            const i1MostrandoDiagonal3 = ref(false);
            const i1MostrandoBolaOperadorCentral = ref(false);
            const i1EstiloLinea1 = ref({});
            const i1EstiloLinea2 = ref({});
            const i1EstiloLinea3 = ref({});
            const i1EstiloBolaOperadorCentral = ref({});

            const i1ContenedorMath = ref(null);
            const i1LugarA = ref(null);
            const i1LugarB = ref(null);
            const i1LugarC = ref(null);
            const i1LugarD = ref(null);
            const i1OperadorCentral = ref(null);
            onMounted(() => {
                if (!i1LugarA.value || !i1LugarB.value || !i1LugarC.value || !i1LugarD.value || !i1ContenedorMath.value) {
                    console.log(`No había elementos de referencia`);
                    return;
                }

                const posContenedor = i1ContenedorMath.value.getBoundingClientRect();

                const posA = i1LugarA.value.getBoundingClientRect();
                const posB = i1LugarB.value.getBoundingClientRect();
                const posC = i1LugarC.value.getBoundingClientRect();
                const posD = i1LugarD.value.getBoundingClientRect();

                //Diagonal 1
                (function () {
                    let posOrigen = posA;
                    let posFinal = posD;
                    let vector = {
                        x: posFinal.left + posFinal.width / 2 - (posOrigen.left + posOrigen.width / 2),
                        y: posFinal.top + posFinal.height / 2 - (posOrigen.top + posOrigen.height / 2),
                    }
                    let ancho = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
                    let rotacion = Math.atan2(vector.y, vector.x);

                    i1EstiloLinea1.value = {
                        width: ancho + 'px',
                        transform: `rotate(${rotacion}rad)`,
                        left: posOrigen.left + posOrigen.width / 2 - posContenedor.left + 'px',
                        top: posOrigen.top + posOrigen.height / 2 - posContenedor.top + 'px',
                    }
                })();

                //Diagonal 2
                (function () {
                    let posOrigen = posB;
                    let posFinal = posC;
                    let vector = {
                        x: posFinal.left + posFinal.width / 2 - (posOrigen.left + posOrigen.width / 2),
                        y: posFinal.top + posFinal.height / 2 - (posOrigen.top + posOrigen.height / 2),
                    }
                    let ancho = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
                    let rotacion = Math.atan2(vector.y, vector.x);

                    i1EstiloLinea2.value = {
                        width: ancho + 'px',
                        transform: `rotate(${rotacion}rad)`,
                        left: posOrigen.left + posOrigen.width / 2 - posContenedor.left + 'px',
                        top: posOrigen.top + posOrigen.height / 2 - posContenedor.top + 'px',
                    }
                    return;
                })();

                //Diagonal 3
                (function () {
                    let posOrigen = posB;
                    let posFinal = posD;
                    let vector = {
                        x: posFinal.left + posFinal.width / 2 - (posOrigen.left + posOrigen.width / 2),
                        y: posFinal.top + posFinal.height / 2 - (posOrigen.top + posOrigen.height / 2),
                    }
                    let ancho = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
                    let rotacion = Math.atan2(vector.y, vector.x);

                    i1EstiloLinea3.value = {
                        width: ancho + 'px',
                        transform: `rotate(${rotacion}rad)`,
                        left: posOrigen.left + posOrigen.width / 2 - posContenedor.left + 'px',
                        top: posOrigen.top + posOrigen.height / 2 - posContenedor.top + 'px',
                    }
                    return;
                })();

                //Bola operador central
                if (!i1OperadorCentral.value) {
                    console.log(`No había operador central para ubicar bola 1`);
                    return;
                }
                const posOperador = i1OperadorCentral.value.getBoundingClientRect();
                i1EstiloBolaOperadorCentral.value = {
                    left: posOperador.left + posOperador.width / 2 - posContenedor.left + 'px',
                    top: posOperador.top + posOperador.height / 2 - posContenedor.top + 'px',
                }
            })

            //i2
            const i2MostrandoDiagonal1 = ref(false);
            const i2MostrandoDiagonal2 = ref(false);
            const i2MostrandoDiagonal3 = ref(false);
            const i2MostrandoBolaOperadorCentral = ref(false);
            const i2EstiloLinea1 = ref({});
            const i2EstiloLinea2 = ref({});
            const i2EstiloLinea3 = ref({});
            const i2EstiloBolaOperadorCentral = ref({});

            const i2ContenedorMath = ref(null);
            const i2LugarA = ref(null);
            const i2LugarB = ref(null);
            const i2LugarC = ref(null);
            const i2LugarD = ref(null);
            const i2OperadorCentral = ref(null);
            onMounted(() => {
                if (!i2LugarA.value || !i1LugarB.value || !i1LugarC.value || !i1LugarD.value || !i1ContenedorMath.value) {
                    console.log(`No había elementos de referencia`);
                    return;
                }

                const posContenedor = i2ContenedorMath.value.getBoundingClientRect();

                const posA = i2LugarA.value.getBoundingClientRect();
                const posB = i2LugarB.value.getBoundingClientRect();
                const posC = i2LugarC.value.getBoundingClientRect();
                const posD = i2LugarD.value.getBoundingClientRect();

                //Diagonal 1
                (function () {
                    let posOrigen = posA;
                    let posFinal = posD;
                    let vector = {
                        x: posFinal.left + posFinal.width / 2 - (posOrigen.left + posOrigen.width / 2),
                        y: posFinal.top + posFinal.height / 2 - (posOrigen.top + posOrigen.height / 2),
                    }
                    let ancho = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
                    let rotacion = Math.atan2(vector.y, vector.x);

                    i2EstiloLinea1.value = {
                        width: ancho + 'px',
                        transform: `rotate(${rotacion}rad)`,
                        left: posOrigen.left + posOrigen.width / 2 - posContenedor.left + 'px',
                        top: posOrigen.top + posOrigen.height / 2 - posContenedor.top + 'px',
                    }
                })();

                //Diagonal 2
                (function () {
                    let posOrigen = posB;
                    let posFinal = posC;
                    let vector = {
                        x: posFinal.left + posFinal.width / 2 - (posOrigen.left + posOrigen.width / 2),
                        y: posFinal.top + posFinal.height / 2 - (posOrigen.top + posOrigen.height / 2),
                    }
                    let ancho = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
                    let rotacion = Math.atan2(vector.y, vector.x);

                    i2EstiloLinea2.value = {
                        width: ancho + 'px',
                        transform: `rotate(${rotacion}rad)`,
                        left: posOrigen.left + posOrigen.width / 2 - posContenedor.left + 'px',
                        top: posOrigen.top + posOrigen.height / 2 - posContenedor.top + 'px',
                    }
                    return;
                })();

                //Diagonal 3
                (function () {
                    let posOrigen = posB;
                    let posFinal = posD;
                    let vector = {
                        x: posFinal.left + posFinal.width / 2 - (posOrigen.left + posOrigen.width / 2),
                        y: posFinal.top + posFinal.height / 2 - (posOrigen.top + posOrigen.height / 2),
                    }
                    let ancho = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));
                    let rotacion = Math.atan2(vector.y, vector.x);

                    i2EstiloLinea3.value = {
                        width: ancho + 'px',
                        transform: `rotate(${rotacion}rad)`,
                        left: posOrigen.left + posOrigen.width / 2 - posContenedor.left + 'px',
                        top: posOrigen.top + posOrigen.height / 2 - posContenedor.top + 'px',
                    }
                    return;
                })();

                if (!i2OperadorCentral.value) {
                    console.log(`No había operador central para ubicar bola 2`);
                    return;
                }
                const posOperador = i2OperadorCentral.value.getBoundingClientRect();
                i2EstiloBolaOperadorCentral.value = {
                    left: posOperador.left + posOperador.width / 2 - posContenedor.left + 'px',
                    top: posOperador.top - 2 + posOperador.height / 2 - posContenedor.top + 'px',
                }
            })

            return {
                i1EstiloLinea1, i1EstiloLinea2, i1EstiloLinea3, i1MostrandoDiagonal1, i1MostrandoDiagonal2, i1MostrandoDiagonal3, i1ContenedorMath, i1LugarA, i1LugarB, i1LugarC, i1LugarD,
                i1OperadorCentral, i1EstiloBolaOperadorCentral, i1MostrandoBolaOperadorCentral,

                i2EstiloLinea1, i2EstiloLinea2, i2EstiloLinea3, i2MostrandoDiagonal1, i2MostrandoDiagonal2, i2MostrandoDiagonal3, i2ContenedorMath, i2LugarA, i2LugarB, i2LugarC, i2LugarD,
                i2OperadorCentral, i2EstiloBolaOperadorCentral, i2MostrandoBolaOperadorCentral

            }
        },
        components: {
            recuadroComponent,
            bloqueComponent,
            enlaceComponent,
            componenteControlSteps
        },
    });
    app.config.compilerOptions.isCustomElement = (tag) => tag.includes('mjx');
    app.mount("#doc");
</script>

<style>
    .contenedorMath {
        position: relative;
    }

    .contenedorMath math {
        position: relative;
        z-index: 1;
    }

    math .hoverable {
        padding: 5px 5px;
        box-sizing: border-box;
    }

    math .hoverable:hover {
        border: 1px solid whitesmoke;
    }

    .expresionPrimera mfrac {
        margin: 0px 15px;
    }

    #i1Numerador {}

    .signal {
        z-index: 0;
    }

    .signal.diagonal {
        position: absolute;
        transform-origin: center left;
    }

    .signal.diagonal .linea {
        width: 100%;
        height: 2px;
        background-color: whitesmoke;
    }

    .signal.diagonal .bolita {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        position: absolute;
        background-color: whitesmoke;
        top: 50%;
        transform: translate(-50%, -50%);
    }

    .signal.diagonal .bolita.inicial {
        left: 0px;
    }

    .signal.diagonal .bolita.final {
        left: 100%;
    }

    .signal.bolaOperadorCentral {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: whitesmoke;
        position: absolute;
        transform: translate(-50%, -50%);
    }

    .operador {
        position: relative;
    }
</style>
